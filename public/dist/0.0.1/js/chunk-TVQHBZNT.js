import{a as n}from"./chunk-OOUCEZ5I.js";var p=n((pt,f)=>{var N="/",z={kz:{image:"/images/flags/kz.svg",label:"\u049A\u0430\u0437\u0430\u049B\u0448\u0430"},ru:{image:"/images/flags/ru.svg",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},en:{image:"/images/flags/en.svg",label:"English"}},_="kz";f.exports={PAGE_ROOT:N,LANGUAGES:z,DEFAULT_LANGUAGE:_}});var c=n((gt,g)=>{function u(r){return r.replace(/\/$/,"").replace(/^\//,"")}function O(r,t,e){let a=r.trim().split("?"),s=a[0].trim(),i=a[1]?.trim();return s?(e!=="/"&&(s=s.replace(e,"")),s=u(s)):s=t,i?`${s}?${i}`:s}function D(r){let t={},e=r;return r[0]==="?"&&(e=r.substring(1)),e.split("&").forEach(o=>{let a=o.split("=");if(a[0]!==""){let s=decodeURIComponent(a[0]),i=a[1]===void 0?"1":a[1];t[s]=i}}),t}function M(r){if(typeof r=="string"){let e=u(r).replace(/([\\\/\-\_\.])/g,"\\$1").replace(/\{[a-zA-Z]+\}/g,"(:any)").replace(/\:any/g,"[\\w\\-\\_\\.]+").replace(/\:word/g,"[a-zA-Z]+").replace(/\:num/g,"\\d+");return new RegExp(`^${e}$`,"i")}return r}g.exports={trimSlashes:u,transformURL:O,parseQuery:D,parseRouteRule:M}});var w=n((dt,y)=>{var{trimSlashes:Q,parseRouteRule:d}=c(),m=class{routes=[];root="/";before;page404;constructor(t){this.before=t?.before,this.page404=t?.page404,t?.root&&(this.root=t.root==="/"?"/":`/${Q(t.root)}/`),t?.routes&&this.addRoutes(t.routes)}get rootPath(){return this.root}addRoutes(t){for(let e of t)this.add(e.rule,e.handler,e.options)}add(t,e,o){return this.routes.push({rule:d(t),handler:e,options:o}),this}remove(t){return this.routes.some((e,o)=>e.handler===t||e.rule===d(t)?(this.routes.splice(o,1),!0):!1),this}findRoute(t){for(let e of this.routes){let o=t.match(e.rule);if(o)return{match:o,route:e}}}async processUrl(t,e,o){if(!await this.before?.({fragment:t,query:e,state:o})){let s=this.findRoute(t);if(!s)await this.page404?.({fragment:t,query:e,state:o});else{s.match.shift();let i={fragment:t,query:e,match:s.match,options:s.route.options,state:o};await s.route.handler?.(i)}}}};y.exports={Router:m}});var U=n((mt,L)=>{var{transformURL:R,trimSlashes:j,parseQuery:B}=c(),v=class{router;popStateHandler;constructor(t){this.router=t,this.popStateHandler=()=>{t.processUrl(this.fragment,this.query,history.state)}}get fragment(){let t=decodeURI(location.pathname);return this.router.rootPath!=="/"&&(t=t.replace(this.router.rootPath,"")),j(t)}get query(){return B(location.search)}async redirectTo(t,e){let o=R(t,this.fragment,this.router.rootPath);history.replaceState(e,"",this.router.rootPath+o);let a=this.fragment,s=this.query;await this.router.processUrl(a,s,e)}async navigateTo(t,e){let o=R(t,this.fragment,this.router.rootPath);history.pushState(e,"",this.router.rootPath+o);let a=this.fragment,s=this.query;await this.router.processUrl(a,s,e)}refresh(){return this.redirectTo(this.fragment+location.search,history.state)}addUriListener(){window.addEventListener("popstate",this.popStateHandler)}removeUriListener(){window.removeEventListener("popstate",this.popStateHandler)}};L.exports={RouteNavigator:v}});var S=n((yt,x)=>{var q=class{pathname="";search=""};x.exports={LocationMock:q}});var A=n((wt,b)=>{var E=class{location;constructor(t){this.location=t}replaceState(t,e,o){this.changeLocation(o)}pushState(t,e,o){this.changeLocation(o)}changeLocation(t){let e=t?.split?.("?");e&&(this.location.pathname=e[0],e.length>1&&(this.location.search="?"+e[1]))}};b.exports={HistoryMock:E}});var P=n((Rt,T)=>{var{Router:C}=w(),{RouteNavigator:I}=U(),{trimSlashes:Z,transformURL:F,parseQuery:J,parseRouteRule:K}=c(),{LocationMock:V}=S(),{HistoryMock:W}=A();T.exports={Router:C,RouteNavigator:I,trimSlashes:Z,transformURL:F,parseQuery:J,parseRouteRule:K,LocationMock:V,HistoryMock:W}});var $=n((vt,H)=>{var{Router:X,RouteNavigator:Y}=P(),{PAGE_ROOT:tt}=p(),k=new X({root:tt}),et=new Y(k),rt={},ot={},st={},at={page:void 0,tr:void 0};H.exports={router:k,routeNavigator:et,views:rt,layouts:ot,languages:st,context:at}});var ft=n((Lt,G)=>{var{routeNavigator:nt,layouts:it}=$();async function l(r){return new Promise(t=>setTimeout(t,r))}async function ct(r,t){r.preventDefault();let e=t.getAttribute?.("href");e&&await nt.navigateTo(e)}async function ut(r,t,e){let o;if(t||r)o=r||document.body;else{let a=location.pathname+"?ajax=1&init=1&time="+Date.now(),s=[];for(let h of e)h in it||s.push(h);s.length>0&&(a+="&layouts="+s.join(","));let i=await(await fetch(a)).text();o=document.createElement("div"),o.innerHTML=i}return o}async function lt(r){r&&(await l(10),r.classList.remove("page-unmount"))}async function ht(r){r&&(r.classList.add("page-unmount"),await l(250))}G.exports={sleep:l,navigateHandler:ct,loadContent:ut,mount:lt,unmount:ht}});export{P as a,p as b,$ as c,ft as d};

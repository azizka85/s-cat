{
  "version": 3,
  "sources": ["../../../../../src/client/views/sign-in-page.js"],
  "sourcesContent": ["const { AuthServiceComponent } = require('./components/auth-service-component');\n\nconst { loadContent, navigateHandler } = require('../utils');\n\nconst { context } = require('../globals');\nconst { DEFAULT_LANGUAGE } = require('../../globals');\n\nclass SignInPage {\n  static page = null;\n\n  node = null;\n\n  titleElem = null;\n\n  emailInputElem = null;\n\n  passwordInputElem = null;\n  passwordLabelElem = null;\n\n  signUpBtn = null;\n  signInBtn = null;\n  cancelBtn = null;\n\n  authService = null;\n\n  signUpBtnClickHandler;\n  cancelBtnClickHandler;\n\n  formSubmitHandler;\n\n  static get instance() {\n    if(!SignInPage.page) {\n      SignInPage.page = new SignInPage();\n    }\n\n    return SignInPage.page;\n  }\n\n  constructor() {\n    this.formSubmitHandler = event => {\n      event.preventDefault();\n\n      const form = this.node?.querySelector('.main-card form');\n      const data = new FormData(form);\n\n      console.log('Form submited: ');  \n      \n      data.forEach((value, key) => {\n        console.log(key + ':', value);          \n      });    \n    };\n\n    this.signUpBtnClickHandler = event => navigateHandler(event, this.signUpBtn);\n    this.cancelBtnClickHandler = event => navigateHandler(event, this.cancelBtn);\n  }\n\n  get elem() {\n    return this.node;\n  }\n\n  async init(parent, firstTime) {\n    let content = await loadContent(parent, firstTime, []);    \n\n    this.node = content.querySelector('[data-page=\"signin-page\"]') || null;    \n\n    const form = this.node?.querySelector('.main-card form');\n\n    this.titleElem = this.node?.querySelector('[data-title=\"main\"]') || null;\n\n    this.emailInputElem = form?.querySelector('#email') || null;\n\n    this.passwordInputElem = form?.querySelector('#password') || null;\n    this.passwordLabelElem = form?.querySelector('#password-label') || null;\n\n    this.signUpBtn = form?.querySelector('[data-button=\"sign-up\"]') || null;\n    this.signInBtn = form?.querySelector('[data-button=\"sign-in\"]') || null;\n    this.cancelBtn = form?.querySelector('[data-button=\"cancel\"]') || null;    \n\n    this.authService = new AuthServiceComponent();\n    await this.authService.init(this, firstTime);\n    \n    return content;\n  }\n\n  async mount() {\n    const form = this.node?.querySelector('.main-card form');\n\n    form?.addEventListener('submit', this.formSubmitHandler);\n    this.signUpBtn?.addEventListener('click', this.signUpBtnClickHandler);\n    this.cancelBtn?.addEventListener('click', this.cancelBtnClickHandler);\n  }\n\n  async unmount() {\n    const form = this.node?.querySelector('.main-card form');\n\n    form?.removeEventListener('submit', this.formSubmitHandler);\n    this.signUpBtn?.removeEventListener('click', this.signUpBtnClickHandler);\n    this.cancelBtn?.removeEventListener('click', this.cancelBtnClickHandler);\n  }\n\n  async load(lang, page, firstLoad) {\n    if(this.titleElem) {\n      this.titleElem.textContent = context.tr('Sign In');\n    }\n\n    if(this.passwordInputElem) {\n      this.passwordInputElem.placeholder = context.tr('Password') + '*';\n    }\n\n    if(this.passwordLabelElem) {\n      this.passwordLabelElem.textContent = context.tr('Password') + '*';\n    }\n\n    if(this.signUpBtn) {\n      this.signUpBtn.textContent = context.tr('Sign Up');\n    }\n\n    if(this.signInBtn) {\n      this.signInBtn.textContent = context.tr('Sign In');\n    }\n\n    if(this.cancelBtn) {\n      this.cancelBtn.textContent = context.tr('Cancel');\n    }\n\n    this.signUpBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/sign-up');\n    this.cancelBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/');\n\n    await this.authService?.load?.(lang, page, firstLoad);\n  }\n}\n\nmodule.exports = {\n  SignInPage\n};\n"],
  "mappings": "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",
  "names": []
}

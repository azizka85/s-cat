{
  "version": 3,
  "sources": ["../../../../../src/client/views/home-page.js"],
  "sourcesContent": ["const { ScrollActionTo, ScrollActionTop, ScrollEventType } = require('../data/scroll');\n\nconst { loadContent } = require('../utils');\n\nconst { layouts } = require('../globals');\n\nclass HomePage {\n  static page = null;\n\n  node = null;\n\n  scrollTopBtn = null;\n\n  scrollTopBtnClickHandler;\n\n  windowScrollHandler;\n\n  currScroll = 0;\n\n  static get instance() {\n    if(!HomePage.page) {\n      HomePage.page = new HomePage();\n    }\n\n    return HomePage.page;\n  }\n\n  constructor() {\n    this.scrollTopBtnClickHandler = () => {\n      layouts['main-layout']?.performAction?.(ScrollActionTop, null);\n    };\n\n    this.windowScrollHandler = (event) => {\n      const data = event.detail;\n\n      if(data.currScroll <= 0) {\n        this.scrollTopBtn?.classList.add('btn-exited');\n      } else {\n        this.scrollTopBtn?.classList.remove('btn-exited');\n      }\n\n      this.currScroll = data.currScroll;\n    };\n  }\n\n  get elem() {\n    return this.node;\n  }\n\n  async init(parent, firstTime) {\n    let content = await loadContent(parent, firstTime, ['main-layout']);    \n\n    this.node = content.querySelector('[data-page=\"home-page\"]') || null;\n\n    this.scrollTopBtn = this.node?.querySelector('[data-button=\"scroll-top\"]') || null;    \n    \n    return content;\n  }\n\n  async mount() {\n    this.scrollTopBtn?.addEventListener('click', this.scrollTopBtnClickHandler);\n\n    layouts['main-layout']?.listen?.(ScrollEventType, this.windowScrollHandler);\n  }\n\n  async unmount() {\n    this.scrollTopBtn?.removeEventListener('click', this.scrollTopBtnClickHandler);\n\n    layouts['main-layout']?.unlisten?.(ScrollEventType, this.windowScrollHandler);\n  }\n\n  async load(lang, page, firstLoad) {\n    layouts['main-layout']?.performAction?.(ScrollActionTo, {\n      top: this.currScroll,\n      noSmooth: true\n    });\n  }\n}\n\nmodule.exports = {\n  HomePage\n};\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA;AAAA,QAAM,EAAE,gBAAgB,iBAAiB,oBAAoB;AAE7D,QAAM,EAAE,gBAAgB;AAExB,QAAM,EAAE,YAAY;AAEpB,0BAAe;AAAA,MAGb,OAAO;AAAA,MAEP,eAAe;AAAA,MAEf;AAAA,MAEA;AAAA,MAEA,aAAa;AAAA,iBAEF,WAAW;AACpB,YAAG,CAAC,UAAS,MAAM;AACjB,oBAAS,OAAO,IAAI;AAAA;AAGtB,eAAO,UAAS;AAAA;AAAA,MAGlB,cAAc;AACZ,aAAK,2BAA2B,MAAM;AACpC,kBAAQ,gBAAgB,gBAAgB,iBAAiB;AAAA;AAG3D,aAAK,sBAAsB,CAAC,UAAU;AACpC,gBAAM,OAAO,MAAM;AAEnB,cAAG,KAAK,cAAc,GAAG;AACvB,iBAAK,cAAc,UAAU,IAAI;AAAA,iBAC5B;AACL,iBAAK,cAAc,UAAU,OAAO;AAAA;AAGtC,eAAK,aAAa,KAAK;AAAA;AAAA;AAAA,UAIvB,OAAO;AACT,eAAO,KAAK;AAAA;AAAA,YAGR,KAAK,QAAQ,WAAW;AAC5B,YAAI,UAAU,MAAM,YAAY,QAAQ,WAAW,CAAC;AAEpD,aAAK,OAAO,QAAQ,cAAc,8BAA8B;AAEhE,aAAK,eAAe,KAAK,MAAM,cAAc,iCAAiC;AAE9E,eAAO;AAAA;AAAA,YAGH,QAAQ;AACZ,aAAK,cAAc,iBAAiB,SAAS,KAAK;AAElD,gBAAQ,gBAAgB,SAAS,iBAAiB,KAAK;AAAA;AAAA,YAGnD,UAAU;AACd,aAAK,cAAc,oBAAoB,SAAS,KAAK;AAErD,gBAAQ,gBAAgB,WAAW,iBAAiB,KAAK;AAAA;AAAA,YAGrD,KAAK,MAAM,MAAM,WAAW;AAChC,gBAAQ,gBAAgB,gBAAgB,gBAAgB;AAAA,UACtD,KAAK,KAAK;AAAA,UACV,UAAU;AAAA;AAAA;AAAA;AApEhB;AACS,kBADT,UACS,QAAO;AAwEhB,WAAO,UAAU;AAAA,MACf;AAAA;AAAA;AAAA;",
  "names": []
}
